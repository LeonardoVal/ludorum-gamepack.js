//! ludorum-game-connect4 0.1.0

(function(a){"use strict";"function"==typeof define&&define.amd?define(["creatartis-base","sermat","ludorum"],a):"object"==typeof exports&&module.exports?module.exports=a(require("creatartis-base"),require("sermat"),require("ludorum")):this.Sermat=a(this.base,this.Sermat,this.ludorum)}).call(this,function a(b,c,d){"use strict";var e=b.declare,f=(b.raise,b.raiseIf),g=(b.Iterable,b.iterable,d.Game,d.players.UserInterface,{__package__:"ludorum-game-connect4",__name__:"ludorum_game_connect4",__init__:a,__dependencies__:[b,c,d],__SERMAT__:{include:[b,d]}}),h=g.ConnectFour=e(d.games.ConnectionGame,{name:"ConnectFour",height:6,width:7,lineLength:4,players:["Yellow","Red"],moves:function(){var a=null;if(!this.result()){for(var b=[],c=this.board.string,d=(this.height-1)*this.width,e=0;e<c.length;++e)"."===c.charAt(d+e)&&b.push(e);b.length>0&&(a={},a[this.activePlayer()]=b)}return a},next:function(a,b,c){f(b,"Haps are not required (given ",b,")!");for(var d=this.activePlayer(),e=this.board.string,g=+a[d],h=this.height,i=this.width,j=0;j<h;++j)if("."===e.charAt(j*i+g)){var k=d===this.players[0]?"0":"1";return c?(this.activatePlayers(this.opponent()),this.board.__place__([j,g],k),delete this.__moves__,delete this.__result__,this):new this.constructor(this.opponent(),this.board.place([j,g],k))}throw new Error("Invalid move "+JSON.stringify(a)+"!")},result:function(){for(var a=this.lineLength,b=this.board.asStrings(this.__lines__(this.height,this.width,a)).join(" "),c=0;c<this.players.length;++c)if(b.indexOf(c.toString(36).repeat(a))>=0)return this.victory([this.players[c]]);return b.indexOf(".")<0?this.tied():null},"static __SERMAT__":{identifier:"ConnectFour",serializer:function(a){return d.games.ConnectionGame.__SERMAT__.serializer(a)}}});return d.games.ConnectFour=h,h.__SERMAT__.identifier=g.__package__+"."+h.__SERMAT__.identifier,g.__SERMAT__.include.push(h),c.include(g),g});
//# sourceMappingURL=ludorum-game-connect4.min.js.map